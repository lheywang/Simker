.\" Manpage for wrappergen
.TH WRAPPERGEN 1 "January 2026" "1.0" "User Commands"
.SH NAME
wrappergen \- A Mixed-Signal Integration Tool for Ngspice & Xschem
.SH SYNOPSIS
.B wrappergen
[\fB\-h\fR]
[\fB\-n\fR \fINAME\fR]
[\fB\-t\fR \fITEMP\fR]
[\fB\-m\fR]
[\fB\-s\fR]
[\fB\-a\fR]
[\fB\-v\fR \fIVOLTAGE\fR]
[\fB\-o\fR \fIBIN_NAME\fR]
[\fB\-nb\fR]
[\fB\-d\fR]
\fIfiles\fR ...
.SH DESCRIPTION
.B WrapperGen
combines multiple Verilog or Verilog-A modules into a single top-level wrapper, generating the necessary C/C++ binaries (\fI.so\fR/\fI.osdi\fR) and Xschem symbols (\fI.sym\fR).
.PP
This tool is essential for co-simulation (\fId_cosim\fR) workflows which require a single digital entry point, automating a process that is otherwise tedious to set up manually.
.SH OPTIONS
.TP
.BR \-h ", " \-\-help
Show the help message and exit.
.TP
.BR \-n ", " \-\-name " \fINAME\fR"
Name of the top module to be used.
.br
Default: \fItop.v\fR. Note : In analog mode, the "top" level file is generated into the TEMP folder.
.TP
.BR \-t ", " \-\-temp " \fITEMP\fR"
Path of the temporary json files.
.br
Default: \fI/tmp/wrappengen/\fR
.TP
.BR \-m ", " \-\-no\-merge\-wires
Disable the auto merge of wires that share a same net into a single output at the end.
.br
Default: Merging is \fBenabled\fR.
.TP
.BR \-s ", " \-\-no\-sym
Do not generate the xschem symbol in the same pass.
.br
Default: Symbol is generated.
.TP
.BR \-a ", " \-\-analog
Enable the analog mode, in which the file is treated as-is, and generate a symbol from it.
.br
Default: no.
.TP
.BR \-v ", " \-\-voltage " \fIVOLTAGE\fR"
Configure the voltage level used for the ADC / DAC bridges on digital blocks. Ignored for analog blocks.
.br
Default: \fI3.3\fR (V).
.TP
.BR \-o ", " \-\-output " \fIBIN_NAME\fR"
Set the name of the OSDI / SO file to be generated. This name is used in the symbol (unless specified to not create a symbol).
.TP
.BR \-nb ", " \-\-no\-binary
Disable binary generation. Otherwise, the \fI.osdi\fR or \fI.so\fR file will be generated from the top level file by default.
.TP
.BR \-d ", " \-\-debug
Add some debug logs and prints.
.SH ARGUMENTS
.TP
.B files
The input verilog files to be combined into a single top. Unlimited for digital design, limited to 1 in analog mode.
.SH NOTES
.SS Wire Merging
By default, two ports that share the name "clk" and same direction would be exposed as one. This makes the design simpler, but could lead to issues. If you have connectivity issues, use the \fB\-m\fR / \fB\--no-merge-wires\fR option to disable the grouping of the same net ports.
.SS Manual Integration
Always start here! If none of the solutions work, you can write your own top-level file manually and let the script only generate the symbol for you (using options like \fB\-\-no\-binary\fR). You'll need to manually build the \fI.so\fR file. 
.SS SPICE Netlist generation
When generating a symbol, two files are generated : a \fI.sym\fR that is the XSCHEM symbol file with all the cosmetic attributes, and a \fI.spice\fR which contain a spice netlist, which is automatically included by XSCHEM.
.SS Analog bridges
Since SPICE is an analog simulator, there's need for interfaces. Theses are automatically generated by this script, inside the subcircuit to prevent any interferences from the global circuit. You can customize voltages with the \fB\-\-voltage\fR argument.
.SH WARNINGS
Due to some limitations of the \fBpyverilog\fR library used, some valid Verilog syntax is not handled. The tool requires ANSI style declarations.
.PP
\fBSupported:\fR
.br
module(input in, output out);
.PP
\fBNot Supported:\fR
.br
module(in, out); input in; output out;
.PP
Using the unsupported syntax will result in a generated device with 0 ports, and, as a consequence, errors when compiling.
.SH AUTHOR
Leonard HEYWANG <leonard.heywang@proton.me>